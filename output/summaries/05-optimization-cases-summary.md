# 5장: 최적화 실전 사례 - 요약

## 📌 핵심 개념

- **사람·정책·기술의 얽힘**: 성능 문제는 순수 기술 문제가 아님
- **램프(Ramp) 안티패턴**: 초기엔 느리지만 시간 경과에 따라 제곱으로 악화
- **빠른 속도 vs 효율성**: 다른 개념 (빠르지만 낭비적일 수 있음)
- **프로파일 기반 의사결정**: 하드웨어 업그레이드 vs 코드 수정 선택의 기준
- **부수적 피해**: 한 곳 최적화가 다른 곳을 느리게 할 수 있음

## 🎓 주요 교훈 (사례 기반)

**사례 1: 컨설턴트 데브라의 청구서 전체 출력 사건**
- 증상: 출력 속도는 빠르지만 종이 수천 장 낭비
- 원인: UI의 `[마지막 실행 날짜 기억하기]` 체크박스가 해제 상태
- 결과: 130근무일(6개월) 후 136,240장 출력, 그중 2,080장만 유효 (98% 낭비)
- 수식: n일째 출력 = 16 * n(n+1)/2 장 (제곱 성장)
- 교훈: 현장 방문이 아니었으면 발견 불가능, 필터링은 **사전(실행 전)**에 적용

**사례 2: SSD vs 알고리즘**
- 제안: 청구서 생성 병목을 SSD 구매로 해결할지, 코드 수정으로 해결할지
- 분석: 프로파일 보면 알고리즘 개선으로 200초→5초 가능 (SSD 없이)
- 기준: **프로파일 확보** → ROI 계산 → 카운트 감소(수정) vs 시간 감소(자원) 우선순위
- 교훈: 기술 신뢰도 영향 (과거 성공 경험이 있으면 수정 선택, 없으면 장비 구매)

**사례 3: 예티(Yeti) - 하드웨어 업그레이드가 느리게 만든 사건**
- 상황: CPU를 700MHz→1GHz로 업그레이드 → 더 느려짐
- 프로파일: 1,957초 중 네트워크 I/O 50% (병목!), 디스크 14%, CPU 7%
- 원인: CPU 업그레이드로 네트워크 호출 빈도↑ → 트래픽 강도 상승 → 네트워크 대기 증가
- 교훈: 암달의 법칙 (비CPU 구간이 크면 CPU 업그레이드는 한계), 프로파일 없이 업그레이드 금지

**사례 4: 빠른 속도 vs 효율성**
- 빠른 속도: 실제 응답 시간이 짧음
- 효율성: 필요한 일만 하고 리소스 덜 씀
- 둘은 다름: 비효율적이지만 하드웨어로 빠르게 할 수도, 효율적이지만 느릴 수도 있음

## 💡 실행 가능한 가이드

### 관찰
- 현장으로 가서 사용자 자리, 프린터, 네트워크 경로를 눈으로 확인
- 성장 패턴 파악: 선형인가? 제곱(램프)인가?

### 측정
- 프로파일/추적으로 이벤트 카운트 vs 시간 분해
- 기준선 확보: 정상 동작 시 프로파일 저장 (비교용)
- 성장 수식 계산: n(n+1)/2 형태로 폭증을 수치화

### 조치 결정
- 카운트 감소(수정/필터)와 시간 단축(자원/하드웨어)의 ROI 비교
- 프로파일에 기반한 선택 (추측 금지)
- 필요시 두 방법 조합

### 검증
- 변경 후 다시 측정 (같은 기준으로)
- 개선율 기록 (200초→5초 같이 구체적)
- 부수적 피해 확인 (다른 프로그램·리소스 영향)

## 📋 체크리스트

- [ ] 증상 위치를 직접 방문해 봤는가?
- [ ] 성장 패턴을 파악했는가? (선형 vs 제곱 램프)
- [ ] 우선순위 높은 프로그램부터 프로파일했는가?
- [ ] 필터링은 실행 전에 적용했는가?
- [ ] 수정(카운트)으로 줄일 수 있는 비효율을 찾았는가?
- [ ] 필요 시 자원 추가를 근거(숫자)로 검토했는가?
- [ ] 변경 후 개선율을 기록했는가?
- [ ] 부수적 피해(다른 프로그램 느려짐 등)가 없는가?

## 🎯 한 문장 요약

> **현장 관찰과 프로파일을 기반으로 수정과 자원 추가의 우선순위를 정해야 하며, 하드웨어 업그레이드가 역효과를 낼 수도 있다.**

---

[← 이전: 4장 - 최적화 기법](04-optimization-techniques-summary.md) | [다음: 6장 - 지연 →](06-delay-summary.md)

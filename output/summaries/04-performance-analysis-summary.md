# 4장: 성능 분석(카운트 vs 시간) - 요약

## 📌 핵심 개념

- **응답 시간 감소의 2가지 방법**: (1) 이벤트 카운트 줄이기 (2) 이벤트 시간 줄이기
- **병목**: 응답 시간에서 가장 많은 비율을 차지하는 리소스/이벤트
- **토우-밀샙 법칙**: 10줄 넘는 데이터는 집계(합계/평균/그래프)로 보여주기
- **주요 실행 경로**: 병렬 작업 중에서 전체 시간을 결정하는 연속 필수 작업
- **ROI 우선순위**: 카운트 감소 → 시간 감소 (보통 카운트 감소가 효율 높음)

## 🎓 주요 교훈

**방울토마토·초콜릿 비유**
- 장바구니에서 초콜릿(불필요 이벤트)을 빼면 비용 즉시 감소
- 프로파일에서도 불필요 이벤트 제거 → 응답 시간 바로 단축

**급여 배치 프로파일 예시**
- SQL*Net 메시지: 50% (네트워크 대기, 병목!)
- SQL*Net 추가 데이터: 21%
- 디스크 순차 읽기: 14%
- CPU(파싱/실행): 소수 %
- **교훈**: CPU가 병목이 아니라면 CPU 업그레이드는 제한적 효과

**케빈의 청구서 사례 (반복)**
- 정상: 40초, 월말: 300초 이상
- 원인: 불필요한 블록 읽기 카운트 폭증
- 해결: 알고리즘/쿼리 수정으로 카운트 감소
- **교훈**: 빠른 IO라도 너무 많으면 느려짐

## 💡 실행 가능한 가이드

### 카운트 줄이기 (이벤트 호출 수 감소)

1. **설정/기능 끄기**
   - 불필요한 로그, 통계, 반복 쿼리 비활성화

2. **중복 작업 제거**
   - 같은 데이터 반복 조회 금지
   - 불필요한 루프 제거
   - 테이블 락 제거

3. **반환 데이터 최소화**
   - 필요한 행/컬럼만 선택
   - Pagination으로 대량 반환 제어
   - 필터로 초기 단계에 제한

### 시간 줄이기 (각 이벤트 실행 속도 향상)

1. **인덱스 추가**
2. **캐시 활용**
3. **네트워크/스토리지 튜닝**
4. **하드웨어 업그레이드**

### 기준선 활용

- 정상일 때 프로파일 확보
- 문제 발생 시 비교해 변화 포착
- 증상 재현 없이도 원인 구간 파악

### 주요 실행 경로 파악

- 간트 차트로 병렬/독립 작업 구분
- **주요 경로**에 있는 작업부터 단축
- 병렬 작업도 리소스 경쟁 고려

## 📋 체크리스트

- [ ] 프로파일로 병목(비율 최대)을 확인했는가?
- [ ] 카운트 vs 시간 중 어디를 먼저 줄일지 결정했는가?
- [ ] 불필요 이벤트/데이터를 제거했는가?
- [ ] 기준선 프로파일을 확보했는가? (정상 vs 문제 상태)
- [ ] 주요 실행 경로를 파악했는가? (간트 차트/병렬성)
- [ ] 변경 후 다시 프로파일링해 개선을 확인했는가?

## 🎯 한 문장 요약

> **응답 시간은 이벤트 카운트와 시간 두 축으로만 줄일 수 있으며, 보통 카운트 감소가 ROI가 높다.**

---

[← 이전: 3장 - 성능 측정](03-performance-measurement-summary.md) | [다음: 5장 - 최적화 실전 사례 →](05-optimization-cases-summary.md)

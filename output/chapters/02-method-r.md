# 2장: 방법론

---

## 들어가며

### 문제는 언제나 여러 개다

현실 세계의 성능 문제는 절대로 단 하나가 아니다.

고객사를 방문하면 항상 **문제 목록**을 받는다:
- "청구서 생성이 너무 느려요"
- "주문을 접수할 수 없어요"
- "보고서가 10분씩 걸려요"
- "시스템 전체가 느려요"

이렇게 문제가 5개, 10개, 심지어 **49개**일 때, 어디서부터 시작해야 할까?

### 방법론이 필요한 이유

많은 엔지니어가 범하는 실수:

**잘못된 접근**:
```
1. 가장 흥미로운 문제부터 본다
2. 가장 쉬운 문제부터 해결한다
3. "은탄환"을 찾으려 한다 (모든 문제를 한 번에 해결할 방법)
4. 증상이 아닌 원인을 먼저 추측한다
```

**올바른 접근**:
```
1. 증상을 나열한다
2. 우선순위를 매긴다
3. 가장 중요한 것부터 해결한다
4. 측정 가능한 개선을 확인한다
```

### 이 장에서 배울 것

2장에서는 다음을 배운다:

1. **증상 목록 만들기**: 문제를 명확히 정의하는 방법
2. **우선순위 설정**: 무엇을 먼저 해결할지 결정하는 방법
3. **부수적 혜택**: 하나를 고치면 다른 것도 고쳐지는 경우
4. **은탄환의 함정**: 없는 해결책을 찾는 시간 낭비
5. **체계적 접근**: 혼란 속에서도 질서를 찾는 방법

### 방법론의 핵심

이 장의 핵심은 간단하다:

> **"무엇이 가장 중요한가?"를 먼저 물어라.**

그리고 그것부터 해결하라.

나머지는 자연스럽게 따라온다.

---

## 01. 오렌지 카운티의 위기

### 1998년 토요일 아침

1998년 텍사스의 화창한 어느 토요일 아침, 나는 녹색과 노란색이 칠해진 트랙터를 몰고 잔디를 깎고 있었다.

뒷문 쪽으로 방향을 틀었을 때, 아내가 연신 손으로 목을 긋는 시늉을 하며 다가오고 있었다.

**당장 트랙터 시동을 끄라는 신호였다.**

아내는 보통 내가 마당에서 일할 때는 방해를 하지 않는데, **레이 레인에게서 전화가 왔다**고 했다.

레이는 **오라클 주식회사의 대표이자 최고운영책임자(COO)**였다.

내 보스의 보스인 레이가 내게 직접 전화를 건 것은 그때가 처음이었다.

### 수십억 달러 규모의 재앙

레이가 연락을 한 이유는 **캘리포니아 남부의 한 고객사가 장애를 유발하는 치명적인 성능 문제**에 시달리던 때문이었다.

**고객사의 상황**:
- 주문을 받을 수가 없었고
- 상품을 배송할 수도 없었고
- 반품을 처리할 수도 없었다
- 거의 **아무것도 못 하는 상태**나 다름없었다

수십억 달러의 매출을 올리는 회사에서 발생한 이 성능 문제는 **매일 수백만 달러의 비용 손실**을 유발하고 있었다.

이 추세가 계속 이어질 경우 고객은 **이번 금요일쯤이면 더 이상 운영이 불가능한 상태**가 될 거라고 레이는 말했다.

### COO가 직접 전화를 건 이유

게다가 다른 이도 아닌 **레이가 직접 전화를 걸어온 이유**가 있었다.

고객사는 자신이 잘못되기라도 한다면 **"할 수 있는 모든 것을 동원해 오라클을 끌어내리겠다"**는 의지를 오라클사 COO에게 분명히 전달하고 싶었던 것이다.

레이는 **오라클 직원이라면 누구든 즉시 데려가 일요일 저녁까지 고객사가 있는 캘리포니아주 오렌지 카운티에 팀을 꾸리라**고 말했다.

나는 당연히 지시를 따랐다.

### 일요일 저녁: 호텔 집결

일요일 저녁 우리 팀은 모두 호텔에 집결했다.

날이 밝자 우리의 드림팀은 **망가지기 일보 직전의 회사**를 찾아갔다.

**도착부터 혼란**:
- 아주 간단한 일조차 어려웠다
- 심지어 **보안시설을 통과해 건물 안으로 들어가는 것도 쉽지 않았다**
- 회의실은 모두 **금요일에 있을지도 모를 회사의 도산에 대비하려는 변호사들**로 이미 가득 차 있었다
- 우리 팀이 일할 공간을 찾는 것조차 어려웠다

### 49가지 고충

하지만 그 회사가 **중요한 일을 잘 처리**한 게 있긴 했다.

**자신들의 문제를 모두 목록으로 정리**해 둔 것이었다.

고객사는 이것들을 **문제(problem)**나 **이슈(issue)**라 하지 않고 **고충(grievance)**이라고 불렀다.

**고충이라는 단어를 사용한 이유**:
- **피해(wrongdoing)**를 암시하는 법률 용어였기 때문
- 오라클이 그들에게 피해를 입혔다고 여긴 것

**고충 목록의 구성**:

고객사는 프로젝트에 참여 중인 모든 사람이 볼 수 있는 **공개된 공간의 화이트보드**에 총 49가지 고충 중 가장 심각한 고충 20가지 정도를 이미 나열해뒀다.

(전체 고충 목록은 이미 스프레드시트에도 정리되어 있었다)

각 고충별로:
- **이름**
- **우선순위**
- **상태**
- **간단한 설명**
- **고충을 해결 중인 담당자의 목록**

까지 적혀 있었다.

나는 **우리가 가는 모든 곳에 우선순위에 따라 나열된 고충 목록이 있길 바랐다**.

그건 우리가 뭔가를 정말로 실행하는 데 도움이 되는 **훌륭한 생각**이었다.

### 팀 배치와 병렬 작업

팀원들과 함께 고충 목록을 살펴본 우리는 **소그룹들을 조직해서 가장 우선순위가 높은 항목을 각기 병렬로 공략**하기 시작했다.

그중에서 내가 맡은 항목은 **'배송 송장(shipping label)을 출력할 수 없음'**이라는 고충이었다.

---

## 02. 배송 송장 출력 문제

### 혼란 속에서 시작

오렌지 카운티에서 벌어진 이슈 중 쉬워 보이는 것은 하나도 없었다.

어딜 봐도 모든 것이 **혼란스러웠고 체계적이지도 않았다**.

하지만 잠시 여기저기 묻고 다니다 보니 **출력 문제를 알고 있는 고객사 직원**을 찾을 수 있었다.

나는 그 직원과 짝을 이뤄 문제를 해결하기로 했다.

### 대시보드는 정상

먼저 이 절차가 얼마나 오래 실행되는지를 확인하기 위해 그 직원에게 **"시스템을 살펴봅시다"**라고 제안했다.

그는 작업 상태를 보여주는 **오라클 생산 애플리케이션 대시보드 양식**을 보여줬는데, 이를 보니 **출력 작업은 이미 한참 전에 완료**된 듯했다.

음, 별로 도움이 안 되네. 이제 어쩌나?

### 올바른 질문

**"송장이 출력되지 않았다는 사실은 어떻게 알게 된 거죠?"** 나는 물었다.

**"출고지에 있는 사람이 송장을 받지 못했으니까요."**

**"출고지까지 데려다주실래요?"**

**우리는 실제 증상을 확인하기 위해 출고지로 향했다.**

### 출고지 현장

출고지는 같은 건물에 있어서 **걸어서 2분** 만에 도착했다.

물리적으로는 지금까지 본 출고지와 비슷했다:
- **창고**가 한쪽에 있었고
- 다른 한쪽에는 **적재 구역**이 있었으며
- 그 사이에 **대기 구역**이 있었다

지게차는 송장 부착을 위해 박스 팔레트를 창고에서 대기 구역으로 옮기고, 그다음엔 배송 기사들이 각자의 트럭에 박스를 옮겨 실었다.

**이 출고지에서 한 가지 이상한 점**:

**아무것도 움직이지 않는다**는 점이었다.

UPS, 페덱스, US메일, DHL 등에서 온 대여섯 명의 기사들과 창고 직원들이 **박스 더미에 앉아서 커피를 마시며 어제 있었던 경기에 대해 수다를 떨고 있을 뿐**이었다.

### 문제 발견

**"저 사람들은 왜 그냥 앉아있는 거죠?"** 나는 물었다.

**"송장을 붙이기 전까진 박스를 트럭에 실을 수 없으니까요."**

**"프린터는 어디에 있나요?"**

프린터는 바로 적재 공간 한가운데에 있었다.

**프린터 구조**:
- 작은 식빵 크기의 프린터
- 용접된 철제 스탠드에 나사로 고정
- 스탠드는 바닥에 고정
- 허리 높이 정도까지 올라와 있어서 사람들은 허리를 숙이지 않고도 송장을 뽑아갈 수 있었다

그 프린터는 **빈 송장 뭉치가 매달린 채 가만히 있을 뿐**이었다.

**프린터에 꽂힌 케이블**:
- 철제 스탠드에 케이블 타이로 묶여 바닥으로 이어져 있었고
- 절연 테이프로 고정된 채 바닥을 가로질러 사무실 문까지 이어진 채
- 문 아래를 지나고 있었다

### 사무실로

**"저 사무실에 가볼 수 있을까요?"** 내가 물었다.

**"물론이죠."**

문을 열자, 뒤쪽 작은 테이블에 **IBM PC 스타일의 마이크로컴퓨터**가 놓여 있었다.

프린터에서 나온 케이블은 컴퓨터 뒤쪽에 꽂혀 있었다.

**그 방에 있던 직원의 설명**:
- 이 컴퓨터는 이 방의 반대편에 있는 **마이크로백스(MicroVAX) 컴퓨터**에 **FTP로 연결**되어 있다
- 마이크로백스 컴퓨터는 송장 출력이 이미 완료된 **메인 컴퓨터**에 연결되어 있었다

**PC 화면은 화면 보호기가 동작 중인 건지 완전히 검은색이었다.**

### 순간의 발견

나를 데려온 직원에게 이 컴퓨터가 무슨 작업을 하던 중인지 확인할 수 있도록 **시프트 키를 눌러달라**고 했다.

그 직원이 키를 누르자 다음과 같은 화면을 볼 수 있었다:

```
C:\>
```

**"아, 이런!"** 직원은 고개를 저으며 말했다.

**"어젯밤에 컴퓨터를 재시동했는데 FTP 서버를 다시 켜는 걸 모두가 깜박한 것 같아요."**

### 즉시 해결

**"FTP 서버를 당장 시작해 볼까요?"**

그 직원은 이미 뭔가를 입력하고 있었다.

몇 초가 지나자 대기 구역에서 **"지직 지직 지지지직"** 하는 소리가 들려왔다.

그렇게 **송장이 프린터에서 쏟아져 나오기 시작**했다.

마치 손가락을 **딱!** 하고 튕기자 **창고 전체가 최면에서 풀려나는 것** 같았다:
- 창고 직원은 송장을 박스에 붙이기 시작했고
- 기사들은 박스를 트럭에 옮겨 실었다

**이제 배송이 가능해졌다.**

### 교훈

**"시스템 재시동 후에는 FTP 서버도 자동으로 시작되는 절차를 마련해야겠습니다."** 내가 말했다.

모두가 고개를 끄덕였다.

**이 이야기의 교훈은 무엇이겠는가?**

> **증상이 발현된 곳으로 가서 관찰하라는 것이다.**

- **부차적 현상**이 아니라 **실제 증상**을
- **쉽게 측정할 수 있는 대체 지표**가 아니라 **실제로 벌어지는 상황**을

관찰해야 한다.

이 경우 실제 문제는:
- ❌ 출력 작업이 완료되었다고 표시된 **화면상의 폼**이 아니라
- ✅ 출고지에 있는 **프린터**였던 것이다

---

## 03. 더 많은 고충들

### 2번 팀: 주문 확인 문제

당연하겠지만 그때 송장 출력 문제를 해결한 것은 49가지 고충 중 **겨우 한 가지 문제를 처리**한 것일 뿐이었다.

(여기서 **처리(remedy)**라는 단어 또한 법률 용어다)

아직 우리에겐 **48가지 고충**이 남아 있었다.

내가 창고에서 송장 프린터를 확인하는 동안 우리 팀원들은 **다른 사용자의 고충을 확인** 중이었다.

**2번 팀이 발견한 문제**:

시스템이 주문 확인 번호를 리턴하는 데 **평균 20분**을 소요하는 문제.

이 문제의 영향도 또한 **끔찍**했다.

### 고객과의 대화

**고객사의 판매 직원**: "전화 주셔서 고맙습니다. 뭘 도와드릴까요?"

**고객사의 고객**: "아, 네, 이번 주에 6백만 달러 규모 주문을 넣으려고요. 자세한 내용은…"

**판매 직원**: "주문 고맙습니다. 그런데 지금 저희 새 시스템이 너무 느려서요, 주문 확인 ID가 발급되려면 몇 분 기다리셔야 하는데 괜찮으시겠어요?"

**구매자의 반응**:

구매자는 주문을 넣을 때마다 **30분씩 시간을 허비**해야 하는 상황에 짜증이 나 있었다.

어떤 구매자는 **다른 공급자를 찾겠노라 으름장**을 놓기도 했다.

### 2번 팀의 해결

2번 팀의 해결 방식은 내 방식과 같았다.

**문제를 사용자 관점에서 관찰**하는 것이었다.

**추적(tracing) 결과**:

2번 팀은 판매 주문 프로그램을 **추적**했다.

추적 결과는 프로그램이 시간을 어떻게 사용하는지 상세하게 보여준다.

추적 결과를 보니:
- 프로그램이 **커스텀 판매 보고서 때문에 발생하는 락(Lock)**의 해제를 기다리고 있음을 알 수 있었다
- 이 **락** 때문에 보고서가 실행되는 동안 판매 주문 테이블에 INSERT, UPDATE, DELETE 등의 동작이 지연되고 있었던 것

**보고서 실행 패턴**:
- 영업 시간 동안 거의 쉴 틈 없이 실행됨
- 매번 **40분**이 걸리며
- 하루에 **수십 번** 실행됨

주문이 순조롭게 처리될 시간은 거의 없는 셈이었다.

### 간단한 해결책

2번 팀은 보고서를 실행하기 위해 **애초에 락이 필요하지 않다**는 사실을 발견하고는 **lock table 명령을 제거**했다.

이 간단한 조치로 이 대환장 파티에서 또 하나의 중요한 현상을 처리할 수 있었다.

이제 고객사는 어이없고 짜증나는 지연 상황 없이 **구매자의 주문을 받을 수 있게** 됐다.

### 다른 문제들

문제가 **49가지**나 된다는 것은 꽤 많은 숫자다.

대부분이 **잘못 작성한 SQL** 때문에 발생한 문제였다.

**판매 보고서 문제**:

판매 보고서가 40분씩 걸리는 것은 두 번째로 큰 문제였다:
- 시간도 훨씬 오래 걸렸을 뿐만 아니라
- 필요한 것보다 훨씬 많은 리소스를 사용했다
- 이 문제는 프로젝트 후반쯤 다른 팀이 해결했다

**사용자 오류**:

또 다른 사용자 오류도 발견했다.

영업 직원들이 자신도 모르는 사이에:
- 이번 달의 판매 보고서가 아니라
- **나폴레옹 시대**부터 현재까지의 판매 보고서를 생성하기도 했다

(보고서의 시작 날짜를 지정하지 않은 것이다)

이 문제는 약간의 교육을 통해 해결했지만, **인터페이스가 더 잘 설계돼 있었다면 결코 일어나지 않았을 일**이었다.

**운영 교육 문제**:

그 밖에 운영 교육이 잘못되어 발생한 문제도 있었다.

예를 들어 어떤 프로그램은 제시간에 종료되지 않아 문제가 되었지만, 실제 문제는 **제시간에 시작하지 않는다**는 것이었다.

고객사가 사용하던 비밀번호를 자동으로 만료시키는 소프트웨어로 인해:
- 사람들이 시스템에 로그인을 하지 못해서
- 프로그램을 실행할 수 없었던 것이다

### 올바른 관찰의 중요성

**이런 모든 문제는 똑바로 관찰하지 않으면 결코 해결할 수 없는 것들이다.**

- ❌ 시스템 관리 도구를 통해서가 아니라
- ✅ **업무를 처리하지 못해 고통받는 실제 개개인의 관점**에서

문제를 관찰해야 한다.

### 첫 월요일의 성과

그 첫 월요일은 우리 팀 전체, 즉 **고객과 우리 컨설턴트 팀 모두에게 중요한 날**이었다.

월요일 저녁 보고 회의가 시작될 때쯤에는, 고객사가 업무 정상화를 기대하기에 **충분할 정도의 성과**를 이뤄냈다.

우리는 **단 하루 만에 고객사가 가장 우선시하는 비즈니스 장애물을 제거**했던 것이다.

---

## 04. 우선순위

### 빠른 완료의 비결

오렌지 카운티에서 진행한 프로젝트를 매우 빠르게 완료할 수 있었던 이유는 **한꺼번에 몰려드는 수많은 문제들을 다루는 방법을 이해하고 있었기 때문**이었다.

고객사에 도착했을 때는 거의 모든 것이 엉망이었지만, 고객사는 **정말 현명한 조치를 하나 취해** 뒀다.

**그들이 겪고 있는 증상에 우선순위를 매겨둔 목록을 준비**해 둔 것이었다.

### 우선순위 목록

이 목록은 다음과 같았다:

| 증상 | 우선순위 |
|------|---------|
| S1. 송장을 출력할 수 없음 | 1 |
| S2. 주문을 확인할 수 없음 | 1 |
| S3. … | 2 |
| … | … |

**'증상' 열**을 통해 우리가 뭘 해야 하는지를 알 수 있었고, **'우선순위' 열**은 우리가 그다음에 해야 할 일을 알려줬다.

이 목록 덕분에 **조치를 훨씬 빠르게 시작**할 수 있었다.

### 동일한 우선순위

여러 작업의 우선순위는 같을 수도 있다.

오렌지 카운티의 사례를 보면 **주문 배송**과 **주문 확인**은 모두 **최우선순위 증상**이었다.

이 두 증상은 모두 고객사가 **지난 금요일에 살아남기 위해 해결해야 하는 문제**였기에 우선순위가 **1**로 지정된 것이다.

### 우선순위가 같을 때

2가지 혹은 그 이상의 증상이 같은 우선순위를 가져도 괜찮지만, 그렇게 되면 **어떤 증상의 조치를 먼저 취해야 하는지를 결정**해야 한다.

**팀이 둘 이상**이라면:
- 나는 오렌지 카운티에서 **6-7개 작은 팀**을 꾸렸다
- **동시에 하나 이상의 최우선순위 증상을 해결**할 수 있다
- 병렬적이고 독립적인 팀의 숫자만큼 최우선순위 증상을 해결할 수 있다

**팀보다 증상이 많다면**:

만약 최우선순위 증상의 수가 운영 중인 팀 수보다 많다면:
1. 일단 증상을 처리할 팀을 배정하고
2. 그중에서도 더 높은 우선순위를 가질 증상이 무엇인지를 결정해야 한다

**우위를 가리기 위한 정보**가 필요하다면:
- 우선순위가 동일한 증상을 깊이 파헤쳐보기 전에
- 우선 **겉으로 드러난 현상부터 분석**해보자
- 그래야 어떤 증상이 가장 빨리 완화될 수 있는지를 알아낼 수 있다

### 운이 좋았던 우리

오렌지 카운티에서 이미 우선순위가 결정된 고충의 목록을 손에 넣을 수 있었던 것은 그저 **운이 좋았기 때문**이었다.

고객사의 **꼼꼼함** 덕분에 많은 시간을 절약할 수 있었다.

우리가 우선순위를 결정하는 방법을 알려주기 전에는 **그런 목록을 만들어놓지도 않는 회사도 허다**하다.

당연하겠지만, 이 과정에서 **소중한 시간이 허비**되고 만다.

### 우선순위 결정의 핵심

이런 과정의 핵심은 **목적을 염두에 두는 것**이다.

즉, **가장 우선적으로 처리해야 하는 중요한 증상이 무엇인지를 결정**하는 것이다.

**우선순위가 낮다는 것**:
- ❌ 증상에 대한 조치를 취하지 않겠다는 뜻이 **아니다**
- ✅ 시급히 처리해야 할 증상의 **바로 다음 순서**는 아니라는 뜻일 뿐이다

> **우선순위 결정이 늦어질수록 증상을 해결하는 시점 또한 늦어진다는 점을 명심하자.**

---

## 05. 그냥 시스템 전체가 느리다고요

### "전부 다 느려요"

간혹 어떤 문제가 있냐고 물어보면 **"전부요, 그냥 전부 다 느려요"**라는 답변을 들을 때가 있을 것이다.

해결해야 할 증상이:
- 한 가지든
- 49가지든
- 말 그대로 전부 다 문제든

**여러분은 재현하고 분석할 증상의 목록부터 만들어야 한다.**

### 날짜를 리턴하는 SQL문

한 번은 **"전부 다 느려요"** 식의 문제를 겪던 고객과 대화를 하다가, 내가 가장 먼저 문제를 해결해야 할 프로그램을 하나 특정해야 한다고 주장하자 불만을 토로했다.

내가 고집을 꺾지 않자 그는 짜증 섞인 목소리로 말했다.

**"날짜를 리턴하는 간단한 SQL문을 실행하는 것조차 느리다고요."**

그 말을 들은 나는 **"좋습니다, 그럼 그 문제부터 추적해봅시다"**라고 답했다.

고객은 터무니없는 짓이라고 생각했겠지만 **쉽게 시도해볼 만한 방법**이었다.

고객은 마지못해 내 말대로 추적을 시작했다.

### 버그 발견

그러자 **금세 버그가 튀어나왔다**.

이 버그를 수정하는 방법은 여러 사람이 제안했던 **수십 가지 수정 목록에 이미 포함**되어 있었다.

하지만:
- 수정 권고 목록과 실제 문제 사이의 **명확한 인과관계**는 나타난 적이 없었기 때문에
- 그 어떤 것도 조만간 수정할 계획은 없었다

물론 이 추적 결과는 **버그 수정에 대한 우선순위를 높이기에 충분한 증거**였다.

### 얼마나 많은 증상이?

그 버그를 수정함으로써 얼마나 많은 증상이 완화되었는지는 직접 들은 바가 없었던 것 같다.

하지만 고객이 추적했던 **SQL 구문 하나 이상의 문제를 해결**했음은 분명하다.

---

## 06. 부수적 혜택

### 방법론의 단계

지금까지 설명한, **성능 개선 프로젝트를 시작할 때 필요한 단계**는 다음과 같다:

**1단계**: 비즈니스가 해결해야 하는 증상의 목록을 나열한다
- "보고서가 너무 느려요"
- "Xerox를 빨리 검색하지 못해요"
- "송장을 출력할 수 없어요"
- 등등

**2단계**: 증상 목록을 비즈니스 우선순위에 따라 재정렬한다

**그다음 단계**: 분석 후 조치를 취하는 것이다
- 목록의 증상들을 관찰하고
- 지연이 발생하는 원인을 찾아
- 조치함으로써 증상을 해결한다

### 원인 파악의 중요성

이 작업의 핵심은 **각 증상의 원인을 파악**하는 것이다.

(필리스의 회사에서 디스크 I/O가 보고서 성능 저하의 원인이라고 가정한 것처럼)

**원인에 대한 가설**이 있을 수는 있지만, 뭔가의 **'수정'을 시작하기에 앞서 이 문제의 원인은 이것이다**라는 것을 판단하는 것이 중요하다.

그러려면 어디서부터 시작해야 할까?

**우선순위를 지정한 증상의 목록**에서부터 시작해야 한다:

| 증상 | 우선순위 | 상태(팀) | 원인 |
|------|---------|---------|------|
| S1 | 1 | 신규 | ? |
| S2 | 1 | 신규 | ? |
| … | … | … | … |

### 팀의 성과

이제 여러분이 **T1과 T2, 2개 팀**을 보유하고 있다고 가정해보자.

**팀 T1**은 원인 **C1**을 파악해 증상 **S1**을 해결했고, 이 팀과 병렬로 일하는 **팀 T2**는 원인 **C2**를 찾아내 증상 **S2**를 해결했다.

이 경우 목록은 다음과 같이 업데이트하면 된다:

| 증상 | 우선순위 | 상태(팀) | 원인 |
|------|---------|---------|------|
| S1 | 1 | 해결(T1) | C1 |
| S2 | 1 | 해결(T2) | C2 |
| … | … | … | … |

### 예상치 못한 해결

이제 목록의 저 아래쪽에 우선순위 **4**로 지정되어 있던 다른 증상 **S14**가 있었는데, **S14 증상을 경험하던 사용자가 갑자기 그 증상이 해결되었다**고 알려왔다고 가정해보자.

이 경우 **S14도 해결**된 것으로 표시할 수 있다.

팀 T1과 T2가 둘 다 증상 S14에 영향을 줄 수 있는 작업을 수행했으므로 (조금 더 시간을 들여 파악해보지 않는다면) **어떤 팀 또는 어떤 원인이 S14를 해결했는지 알 수는 없다**.

하지만 적어도 팀 T1과 T2가 원인 C1과 C2를 해결하는 동안에 **S14 증상마저 해결**했다는 것은 알 수 있으므로 목록을 다음과 같이 수정할 수 있다:

| 증상 | 우선순위 | 상태(팀) | 원인 |
|------|---------|---------|------|
| S1 | 1 | 해결(T1) | C1 |
| S2 | 1 | 해결(T2) | C2 |
| S14 | 4 | 해결(T1 또는 T2) | C1 또는 C2 |

### 부수적 혜택이란

이처럼 **한 증상을 해결하려는 시도가 우연히 다른 증상까지 해결하는 상황**을 **부수적 혜택(collateral benefit)**이라고 한다.

**2개의 서로 다른 증상이 동일한 원인에 의해 발생한 경우**라고 할 수 있다.

### 부수적 혜택은 흔하다

부수적 혜택은 흔하다.

**예시**:
- 시스템 날짜를 리턴하는 간단한 쿼리를 수정하는 버그가 **다른 쿼리에도 도움**이 되는 경우가 있다
- 프로그램의 알고리즘을 좀 더 효율적인 것으로 바꾸는 작업은:
  - 여러분이 작업 중인 프로그램에만 도움이 되는 것이 아니라
  - 여러분이 개선한 프로그램과 **리소스를 공유하는 다른 프로그램에도 도움**이 된다

**오렌지 카운티 사례**:

판매 주문 테이블의 **락(Lock)**은:
- 새 주문을 생성하는, 더 높은 우선순위의 프로그램의 실행을 방해했을 뿐만 아니라
- 기존 주문을 수정하는, 더 낮은 우선순위의 프로그램의 실행도 방해한 셈이다

| 증상 | 원인 |
|------|------|
| S1. 송장을 출력할 수 없음 | C1. FTP 서버가 시작되지 않았음 |
| S2. 주문을 승인할 수 없음 | C2. 판매 주문 테이블에 락이 걸림 |
| S14. 주문을 수정할 수 없음 | C2. 판매 주문 테이블에 락이 걸림 |

### 얼마나 분석할 것인가

부수적 혜택이 존재하는 경우 **그 혜택이 어디서 발생했는지에 대해 어느 정도 분석할 것인지**는 경영진이 결정할 일이다.

오렌지 카운티 일화에서는 주문을 수정할 수 없는 증상(S14)의 원인이 **락 때문(C2)**이라는 점을 쉽게 알아낼 수 있었다.

하지만 그렇게 간단하지 않은 경우도 있다.

**그러면 이제는 재현해 볼 수도 없는 증상인 S14에 대해 더 분석이 필요할까?**

대답은 적어도 **'그럴 수도 있다'**이다.

**분석이 필요한 이유**:
- 여러분이 이 직업에 어울리는 중요한 이유 중 하나는 **호기심**이다
- 게다가 **지식은 힘**이 된다
- S14 증상의 원인을 알면 **향후 재발을 방지**할 수도 있을 것이다

**하지만**:

해결해야 할 **더 중요한 우선순위의 증상들**이 있다면 우선 그 문제부터 해결해야 할 것이다.

궁금증을 유발하는 S14 증상은 **상황이 어느 정도 진정된 후에 살펴봐도** 되니까.

---

## 07. 은탄환에 대한 기대

### 은탄환이란

여러분이 겪게 될 장애물 중 하나는 **은탄환(silver bullet)에 대한 기대**다.

**은탄환에 대한 기대란**:
- 문제가 몇 개든 - 예컨대 49가지라 해도
- 뭔가 스위치를 켜거나 손잡이를 돌리면 **모든 문제가 해결될 거라는 믿음**이다

이 믿음은:
- 모든 증상이 **한 가지 이유**로 발생하며
- 모든 문제가 **부수적 혜택**으로 해결될 거라는 추측이다

### 은탄환의 함정

하지만 **이 같은 추측이야말로 문제를 일으키는 원인**이다.

사실 모든 증상의 원인이 하나가 아니라면 어떻겠는가?

**있지도 않은 원인을 찾는 것**은:
- 낭비일 뿐더러
- 구성원의 사기를 떨어뜨릴 뿐이다

### 오렌지 카운티의 교훈

오렌지 카운티의 일화에서 **"송장 출력, 주문 접수, 그리고 나머지 47가지 문제를 동시에 일으킨 단 하나의 원인이 무엇인지"**에만 집착했다면 우리는 **아무런 문제도 해결하지 못했을 것**이다.

이런 집착에 빠져드는 것은 **아무런 의미가 없다**.

모든 증상을 일으킨 한 가지 이유 따위는 없었으므로 **답을 찾을 수 없는 질문**일 뿐이다.

**단 한 가지 이유 따위는 없다.**

### 올바른 접근

그러므로 **원인이 한 가지라고 생각하지는 말자**.

설령 나중에라도 모든 증상의 원인이 한 가지인 경우가 발생한다 해도, 여러분이 문제를 해결하는 방법이 달라져서는 안 된다.

즉, **어떤 상황에서도 무조건 '고충 목록'**을 만들어서 우선순위를 정하는 것부터 시작하자.

**두 가지 경우**:
- **첫 번째 증상을 해결했는데 나머지 증상이 모두 해결**된다면 → 여러분의 **행운을 즐기면** 된다
- **첫 번째 증상을 해결했는데 나머지 증상이 한 번에 해결되지 않는다**면 → 그다음으로 우선순위가 높은 순서대로 **증상을 해결**해 나가면 된다

---

## 08. 증상 목록

### 적합성(Relevance)

여러분이 팀에 강조해야 할 가장 중요한 요인 중 하나는 **적합성(relevance)**이다.

**적합성이란**:
- 무엇이 **중요**하며
- 무엇은 **중요하지 않은지**를

인지하는 것이다.

**목표와 무관한 행위**를 벌이는 것은 **망치를 힘껏 휘둘러놓고 못 하나 박지 못하는 것**과 같다.

### 업무에 역량을 집중하는 방법

성능 개선 업무에 역량을 집중하는 방법은 간단하다:

> **비즈니스 측면에서 최우선으로 중시하는 증상을 먼저 분석하자.**

증상의 목록에 우선순위를 매기는 것은 매우 중요하다.

**우선순위가 없다면 증상 목록은 별 가치가 없기 때문**이다.

### 헬스 체크의 함정

예를 들어 시스템의 **헬스 체크(health check)**를 수행하러 파견을 나갔다고 생각해보자.

**상황**:
- 우선순위가 매겨진 증상 목록은 **없다**
- 시스템을 전반적으로 둘러보고 뭔가 **의심스러운 시스템의 설정과 동작을 모두 찾아야** 하는 상황이다

**발견한 것들**:
- 누락된 인덱스
- 불합리한 매개변수 설정
- 연결이 불량한 컨트롤러 보드
- 등 **흥미로운 증상 몇 가지**를 발견했다

의심의 여지없이 **모두 중요한 사항**들이다.

### 문제점

그리고 이 증상들을 모두 해결했다고 가정하자.

좋아, 이제 됐어.

**그렇다면 실제 문제점을 해결했는지 못했는지는 어떻게 알 수 있을까?**

어떻게 했어야 하는지 정답을 기억하고 있는가?

**이제 고객사는 여러분에게 회계부원 필리스를 소개해줄 거다.**

필리스는 여러분이 듣도 보도 못한 보고서를 실행할 것이고, 그제서야 여러분은 **"아, 우리가 증상 목록을 만들지 않았구나"**라고 깨닫게 될 것이다.

**허겁지겁 목록을 만들어 보니**:
- 필리스의 보고서도 목록에 포함되어 있고
- 뭘 어떻게 해야 할지 도무지 알 수가 없다
- 게다가 필리스의 보고서가 어떻게 동작하는지 알지 못하니
- 여러분이 수정한 부분이 필리스의 보고서 문제를 해결할 수 있는지 없는지도 몰라 당황스러울 것이다

### 증상 목록의 중요성

> **증상 목록부터 시작하자. 우선순위를 매기자. 그리고 가장 중요한 것부터 해결하자.**

이것이 **방법론**이다.

---

## 09. R 방법론

### R의 의미

내가 오랜 현장에서 구축한 공식 성능 개선 절차가 **R 방법론**이다.
- **R은 Response time**에서 따왔지만, **처리량(throughput)**을 최적화할 때도 그대로 유용하다.
- 증상을 표현할 때 사람들이 가장 많이 말하는 것이 "시간이 오래 걸린다"이기 때문에 응답 시간 중심으로 시작한 이름이다.

### R 방법론의 7단계

이 방법론은 늘 같은 흐름을 따른다:

1. **비즈니스가 해결해야 하는 증상을 모두 나열**한다.
2. **증상 목록을 비즈니스 우선순위로 재정렬**한다.
3. 우선순위가 매겨진 **각 증상 S에 대해**:
4. **증상 S를 관찰**한다. 가능하면 **증상이 실제로 발현되는 순간**을 본다.
5. 관찰과 데이터로 **원인 C를 찾는다**.
6. **원인 C에 대한 조치**를 취한다.
7. **조치 결과로 증상 S가 해결**되었는지 확인한다.

이 책 전반의 사례(낸시, 오렌지 카운티)에서 계속 보여주듯, **우선순위를 따라 증상을 관찰하고 원인을 찾아 해결하는 것**이 R 방법론의 본질이다. 다음 장에서는 컴퓨터 프로그램이 느려질 때 어떤 것을 관찰해야 하는지를 더 자세히 다룬다.

## 핵심 정리

### 방법론의 핵심 원칙

성능 개선 프로젝트를 성공적으로 완료하려면:

**1. 증상 목록을 만들어라**
```
"보고서가 느려요" → 증상
"청구서 생성이 느려요" → 증상
"주문을 접수할 수 없어요" → 증상
```

**2. 우선순위를 매겨라**
```
증상 목록 없이는 → 어디서 시작할지 모른다
우선순위 없이는 → 무엇이 중요한지 모른다
```

**3. 가장 중요한 것부터 해결하라**
```
우선순위 1 → 먼저 해결
우선순위 2 → 다음 해결
우선순위 3 → 그다음 해결
```

**4. 측정하고 확인하라**
```
증상 해결 전 → 330초
증상 해결 후 → 50초
개선율 → 85%
```

### 증상 → 우선순위 → 해결

**올바른 프로세스**:

```
1. 증상 나열
   ↓
2. 우선순위 설정
   ↓
3. 관찰 및 분석
   ↓
4. 원인 파악
   ↓
5. 조치 실행
   ↓
6. 검증
```

**잘못된 프로세스**:

```
❌ 바로 원인 추측
❌ 은탄환 찾기
❌ 쉬운 것부터 해결
❌ 흥미로운 것 먼저
```

### 좋은 예 vs 나쁜 예

**좋은 예**:
```
✅ "송장 출력이 안 됩니다" (증상 명확)
✅ 출고지로 가서 프린터 확인 (현장 관찰)
✅ FTP 서버 미시작 발견 (원인 파악)
✅ 즉시 해결 및 자동화 (조치)
```

**나쁜 예**:
```
❌ "시스템이 느립니다" (증상 불명확)
❌ 서버실에서 CPU 확인 (잘못된 관찰)
❌ "CPU가 문제일 거야" (추측)
❌ CPU 업그레이드 (잘못된 조치) → 더 느려짐
```

### 부수적 혜택을 기대하되 의존하지 마라

**부수적 혜택은 보너스**:
```
주문 승인 문제 해결 (목표)
   ↓
주문 수정 문제도 해결 (보너스)
```

**하지만 의존하지 마라**:
```
❌ "한 가지만 고치면 모든 게 해결될 거야" (은탄환)
✅ "하나씩 우선순위대로 해결하자" (방법론)
```

### 핵심 문구

> **"무엇이 가장 중요한가?"**

이 질문에 답하지 못하면 모든 노력이 낭비될 수 있다.

> **"증상 목록부터 시작하자. 우선순위를 매기자. 그리고 가장 중요한 것부터 해결하자."**

이것이 방법론이다.

> **"은탄환은 없다. 하나씩 체계적으로 해결하라."**

49가지 문제가 있다면, 49번의 해결이 필요할 수도 있다.

---

## 체크리스트

성능 문제를 체계적으로 해결하기 위해:

```
□ 증상 목록 작성
  - 모든 문제를 나열했는가?
  - 각 증상이 명확한가?
  - 측정 가능한가?

□ 우선순위 설정
  - 비즈니스 영향도를 고려했는가?
  - 이해관계자와 합의했는가?
  - 우선순위 1이 명확한가?

□ 팀 배치
  - 최우선순위 증상에 팀을 배치했는가?
  - 병렬 작업이 가능한가?
  - 각 팀의 목표가 명확한가?

□ 관찰 및 분석
  - 증상이 발생하는 현장을 방문했는가?
  - 실제 사용자 관점에서 관찰했는가?
  - 추적(trace) 데이터를 수집했는가?

□ 원인 파악
  - 데이터를 기반으로 원인을 파악했는가?
  - 추측이 아닌 측정을 했는가?
  - 원인이 명확한가?

□ 조치 실행
  - 우선순위대로 해결하고 있는가?
  - 각 해결책의 영향을 측정했는가?
  - 부수적 혜택을 확인했는가?

□ 검증
  - 증상이 실제로 해결되었는가?
  - 목표를 달성했는가?
  - 다른 문제를 일으키지 않았는가?

□ 은탄환 함정 회피
  - 모든 문제를 한 번에 해결하려 하지 않았는가?
  - 없는 원인을 찾고 있지 않은가?
  - 체계적으로 접근하고 있는가?
```

---

## 마치며

### 오렌지 카운티의 교훈

1998년 토요일, 레이 레인의 전화로 시작된 오렌지 카운티 프로젝트.

**49가지 고충**을 단 하루 만에 대부분 해결할 수 있었던 비결은:

> **체계적인 방법론**

- 증상 목록이 이미 준비되어 있었고
- 우선순위가 명확했으며
- 팀을 병렬로 배치했고
- 가장 중요한 것부터 해결했다

### 방법론이 힘이다

**방법론 없이**:
- 흥미로운 문제부터 본다
- 쉬운 것부터 해결한다
- 은탄환을 찾는다
- 시간을 낭비한다

**방법론과 함께**:
- 증상을 나열한다
- 우선순위를 매긴다
- 중요한 것부터 해결한다
- 성과를 만든다

### 다음 장에서

2장에서 우리는 **"무엇을 해결할 것인가"**를 배웠다.

3장에서는 **"어떻게 측정할 것인가"**를 배운다.

증상을 정의했다면, 이제 그것을 **측정**하고 **분석**하는 방법을 알아야 한다.

**기억하라**:

> **"측정할 수 없으면 개선할 수 없다."**

그리고:

> **"은탄환은 없다. 하나씩, 체계적으로."**

---

[← 이전: 1장](01-observation.md) | [다음: 3장 →](03-performance-measurement.md)

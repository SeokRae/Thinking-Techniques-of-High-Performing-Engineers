# 8장: 문제 해결

---

## 00. 들어가며

이 장은 성능 문제를 해결할 때 반복적으로 사용되는 **4가지 질문**과, 데이터를 끝까지 보고 대화/결정 과정에서 피드백 루프를 만드는 방법을 다룬다.

- 증상을 정의하고(무엇이 느린가)
- 데이터를 확보해(왜 느린가)
- 개선을 예측하고(얼마나 좋아질까)
- 적용 후 확인한다(실제로 좋아졌나)

---

## 01. 네 가지 간단한 질문 (#057)

1) **얼마나 걸리나?**  
2) **왜 그렇게 오래 걸리나?**  
3) **만약 ~한다면?** (예측)  
4) **그 밖에?** (다른 영향/부작용)

이 네 질문을 반복하며 문제를 좁혀 나간다. 측정(스톱워치, 추적) 없이는 답할 수 없다.

---

## 02. 데이터를 끝까지 살펴보기 (#058)

- “얼마나” 질문 뒤에는 항상 **“왜”**가 따라온다.  
- 추적/프로파일 데이터가 부족하면 더 깊이 파고들 수 없다.  
- 데이터가 이상하게 길거나 짧게 나오면 필터링/집계 오류 가능성도 점검.  
- 필요한 데이터를 확보할 때까지 읽고 질문하고 실험을 반복한다.

### 비유
- 영수증을 봐야 지출의 이유를 안다.  
- 프로파일을 봐야 쿼리 대기 시간의 이유를 안다.

---

## 03. 임원의 피드백 루프 (#059)

임원/리더는 두 질문에 관심이 있다:
1) **x 방법을 적용하면 얼마나 완화될까?** (투자 전 예측)  
2) **x 방법을 적용했더니 얼마나 완화됐나?** (투자 후 결과)

→ 이 두 질문을 잇는 것이 **피드백 루프**. 추적/측정이 루프의 핵심이다.

---

## 04. 수적 피해 (#060)

- 지표·데이터를 잘못 해석하면 “수적 피해”(비율, 평균 등 숫자만 보고 잘못된 결론)로 이어질 수 있다.  
- 수치만이 아니라 **맥락**(누가, 언제, 어떤 경로로)을 함께 봐야 한다.  
- 숫자가 좋아도 사용자 경험이 나쁘면 다시 질문을 시작한다.

---

## 05. 대기 시간 숨기기 (#072~#074)

### 엄마의 초단시간 요리 노하우
- 끓는 물을 올려놓고, 기다리는 동안 감자 손질/샐러드 준비 → 대기 시간을 다른 작업으로 숨김.

### 골프/일상 예시
- 샷 차례 전에 준비, 광고 시간에 화장실, 주유 중 앞유리 닦기 등.

### 도미닉 & 병렬화 데모
- 오라클 병렬 실행 데모: 병렬로 실행해 응답 시간을 극적으로 단축.  
- 핵심: **병렬화는 대기 시간 숨기기의 한 형태**; 응답 시간은 줄지만 부하는 줄지 않는다.

---

## 06. 병렬화 (#074)

- 작업을 여러 프로세스/CPU에 분할해 **응답 시간**을 줄인다.  
- 단, 총 작업량은 그대로이므로 리소스 사용량은 증가.  
- 적절한 수준에서 병렬도를 조절해야 한다.

---

## 07. 부수적 피해 (#060)

- 한 경험을 개선하려다 다른 부분이 악화될 수 있다(예: CPU 업그레이드로 네트워크 대기 증가, 인덱스 추가로 배치 인서트 느려짐).
- 지침:
  - 해결책의 범위는 증상의 범위와 비례하게.
  - 로컬 설정으로 충분하면 전역 설정을 바꾸지 말 것.
  - 우선순위 높은 프로그램이 해당 리소스 부족을 겪는지 먼저 확인.
  - 변경 시 다른 프로그램 영향까지 통합 테스트로 확인.

---

## 08. 과유불급 (#061)

- 튜닝 파라미터는 ‘욕조 곡선’처럼 최적 구간이 있다. 너무 높이면 오히려 무한히 느려질 수 있다(메모리 부족 등).  
- “두 알이면 나아지니 한 병 먹으면?” 식의 과유불급 사례처럼, 최적값을 넘기면 해가 된다.  
- 결론: 적절한 지점에서 멈춰야 한다.

---

## 09. IT 본부장 더그 (#062)

- 99.999% 가용성을 요구받았지만, 합리적 비용으로는 99.99%까지만 현실적.  
- 의사결정권자(더그)를 불러 빠르게 피드백 루프를 닫으니 즉시 99.99%로 결정하고 회의 종료.  
- 교훈: **결정권자와 빠른 피드백 루프**가 없으면 시간만 낭비한다.

---

## 10. 완료란 무엇인가 (#063)

- “모두 만족하면 완료”는 주관적이다. **최고 속도** 개념으로 객관화:
  1) 불필요 이벤트 없음(효율)  
  2) 이벤트가 하드웨어 속도로 실행(대기 없음)  
- 이 두 조건을 만족하면 남은 개선은 하드웨어 업그레이드뿐.  
- 최고 속도를 알면:
  - 오늘/미래의 비즈니스 가치 계산
  - 요구사항이 최고 속도 이상이면 업그레이드 외 대안 없음

---

[← 이전: 7장](07-waste.md) | [다음: 9장 →](09-prediction.md)
